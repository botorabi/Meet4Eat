<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Meat4Eat Admin Panel</title>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="shortcut icon" href="public/images/favicon.ico">
		<script src="public/libs/js/jquery.js"></script>
		<script src="public/libs/js/bootstrap.js"></script>
		<script src="public/libs/js/moment.js"></script>
		<script src="public/libs/js/metisMenu.js"></script>
		<script src="public/libs/js/jquery.dataTables.js"></script>
		<script src="public/libs/js/dataTables.bootstrap.js"></script>
		<script src="public/libs/js/dataTables.responsive.js"></script>
		<script src="public/libs/js/bootstrap-datetimepicker.min.js"></script>
		<script src="public/libs/js/sb-admin-2.js"></script>
		<script src="public/libs/js/Meet4Eat-REST.js"></script>
		<script src="public/libs/js/Meet4Eat-UI_Event.js"></script>
		<script src="public/libs/js/Meet4Eat-UI_User.js"></script>
		<script src="public/libs/js/Meet4Eat-UI_Image.js"></script>
		<script src="public/libs/js/Meet4Eat-UI_UpdateCheck.js"></script>
		<script src="public/libs/js/Meet4Eat-UI.js"></script>
		<link rel="stylesheet" href="public/libs/css/bootstrap.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/dataTables.bootstrap.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/dataTables.responsive.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/bootstrap-datetimepicker.min.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/metisMenu.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/sb-admin-2.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/font-awesome.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/Meet4Eat-UI.css" type="text/css">
	</head>
	<body>
		<div class="container hide" id="main_login">
			<h2 class="text-center">Welcome to Meet4Eat Admin Panel</h2>
			<div class="">
				<div class="col-md-4 col-md-offset-4">
					<div class="login-panel panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Please Sign In</h3>
						</div>
						<div class="panel-body">
							<form id="form_login" role="form">
								<fieldset>
									<div class="form-group">
										<input class="form-control" placeholder="Login name" name="login" type="text" autofocus>
									</div>
									<div class="form-group">
										<input class="form-control" placeholder="Password" name="password" type="password" value="">
									</div>
									<input type="submit" hidden onclick="getMeet4EatUI().onBtnLogin(); event.preventDefault();">
									<a class="btn btn-lg btn-primary btn-block" onclick="getMeet4EatUI().onBtnLogin()">Login</a>
								</fieldset>
							</form>
							<hr>
							<div>
								<a class="small" href="register.html">You have no account? <strong>Register now!</strong>.</a>
								<br><a class="small" href="requestpassword.html">Forgot your password?</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="main_content" class="hide">
			<!-- Navigation -->
			<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html">Meet4Eat Admin Panel <span id="timeout_info" class="small">(Timeout in 30 min)</span></a>
				</div>
				<!-- /.navbar-header -->

				<ul class="nav navbar-top-links navbar-right">
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#">
							<i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li><a onclick="getMeet4EatUI().onEditUserProfile()"><i class="fa fa-user fa-fw"></i> User Profile</a>
							</li>
							<li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
							</li>
							<li class="divider"></li>
							<li><a onclick="getMeet4EatUI().onBtnLogout()"><i class="fa fa-sign-out fa-fw"></i> Logout '<span id="user_name"></span>'</a>
							</li>
						</ul>
						<!-- /.dropdown-user -->
					</li>

				</ul>
	            <!-- /.navbar-top-links -->

				<div class="navbar-default sidebar" role="navigation">
					<div class="sidebar-nav navbar-collapse">
						<ul class="nav" id="side-menu">
							<li>
								<a onclick="getMeet4EatUI().onMenu('dashboard');"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a>
							</li>
							<li>
								<a onclick="getMeet4EatUI().onMenu('users');"><i class="fa fa-user fa-fw"></i> Users</a>
							</li>
							<li>
								<a onclick="getMeet4EatUI().onMenu('events');"><i class="fa fa-group fa-fw"></i> Events</a>
							</li>
							<li id="admin_nav_system" class="hide">
								<a onclick="getMeet4EatUI().onMenu('system');"><i class="fa fa-laptop fa-fw"></i> System</a>
							</li>
							<li>
								<a onclick="getMeet4EatUI().onMenu('about');"><i class="fa fa-question-circle-o fa-fw"></i> About</a>
							</li>
						</ul>
					</div>
					<!-- /.sidebar-collapse -->
				</div>
				<!-- /.navbar-static-side -->
			</nav>

			<div id="page-wrapper">

				<!-- NOTE main menu element IDs are expected to begin with menu_ see function onMenu -->
				<div id="menu_dashboard">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">Dashboard</h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<div class="row">
						<div class="col-lg-3 col-md-6">
							<div class="panel panel-primary" role="button" onclick="getMeet4EatUI().onMenu('users')">
								<div class="panel-heading">
									<div class="row">
										<div class="col-xs-3">
											<i class="fa fa-user fa-5x"></i>
										</div>
										<div class="col-xs-9 text-right">
											<div class="huge" id="count_users">?</div>
											<div>Users</div>
										</div>
									</div>
								</div>
								<a>
									<div class="panel-footer">
										<span class="pull-left">View Details</span>
										<span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
										<div class="clearfix"></div>
									</div>
								</a>
							</div>
						</div>

						<div class="col-lg-3 col-md-6">
							<div class="panel panel-primary" role="button" onclick="getMeet4EatUI().onMenu('events')">
								<div class="panel-heading">
									<div class="row">
										<div class="col-xs-3">
											<i class="fa fa-group fa-5x"></i>
										</div>
										<div class="col-xs-9 text-right">
											<div class="huge" id="count_events">?</div>
											<div>Events</div>
										</div>
									</div>
								</div>
								<a>
									<div class="panel-footer">
										<span class="pull-left">View Details</span>
										<span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
										<div class="clearfix"></div>
									</div>
								</a>
							</div>
						</div>
					</div>
					<!-- /.row -->
				</div>
				<!-- menu_dashboard -->

				<div id="menu_users" class="hide">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">Users <a id="page_users_new" class="hide btn btn-sm btn-primary pull-right" onclick="getMeet4EatUI().onBtnUserNew()">New User</a></h1>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="panel panel-default">
								<div class="panel-heading">
									<strong>List of all users</strong>
								</div>
								<!-- /.panel-heading -->
								<div class="panel-body">
									<table id="table_users" width="100%" class="table table-striped table-bordered table-hover">
										<thead>
											<tr>
												<th>Name</th>
												<th>Login</th>
												<th>Creation Date</th>
												<th>Last login</th>
												<th>Roles</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
								<!-- /.panel-body -->
							</div>
							<!-- /.panel -->
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<!-- /.row -->
				</div>

				<!-- menu_users_edit -->
				<div id="page_users_edit" class="hide">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header text-center">Edit User</h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<div class="row">
						<div class="col-sm-8 col-sm-offset-2">
							<div class="panel panel-default">
								<div class="panel-heading">
									<strong><span id="page_users_edit_title"></span></strong>
								</div>
								<!-- /.panel-heading -->
								<div class="panel-body">
									<form role="form" id="page_users_edit_form">
										<input name="id" hidden>
										<div class="form-group">
											<label>Login</label>
											<input id="page_users_edit_form_login" maxlength="32" class="form-control" name="login" placeholder="Login name">
											<p class="help-block">This name is used for authentication (At least 6 characters).</p>
										</div>
										<div class="form-group">
											<label>Name</label>
											<input class="form-control" maxlength="32" name="name" placeholder="Enter your name">
											<p class="help-block">Real user name</p>
										</div>
										<div class="form-group">
											<label>Email</label>
											<input id="page_users_edit_form_email" class="form-control" maxlength="64" name="email" placeholder="yourmail@dot.com">
											<p class="help-block">Your email address</p>
										</div>
										<div id="page_users_edit_form_grp_passwd" class="form-group">
											<label>Password</label>
											<input class="form-control" maxlength="128" type="password" name="password" placeholder="Password">
										</div>
										<div id="page_users_edit_form_grp_passwd_repeat" class="form-group">
											<label>Password Repeat</label>
											<input class="form-control" maxlength="128" type="password" name="password-repeat" placeholder="Password">
										</div>
										<div id="page_users_edit_roles" class="form-group">
											<label>Roles</label>
											<select id="page_users_edit_roles_sel" multiple class="form-control">
												<option>ADMIN</option>
												<option>MODERATOR</option>
												<option>&nbsp;</option>
											</select>
											<p class="help-block">Assign special roles. Select multiple roles by holding down Ctrl key.</p>
										</div>
										<div class="form-group">
											<div><label>Photo</label></div>
											<div class="col-sm-8 col-sm-offset-2 text-center">
												<div>
													<img id="page_users_edit_photo_img" style="max-width: 256px; cursor: pointer;" src="public/images/user-default.png" alt="User Photo" onclick="$('#page_users_edit_photo_img_input').trigger('click');">
													<input id ="page_users_edit_photo_img_input" class="hide" type="file" onchange="getMeet4EatUI().onBtnUserPhoto(event);">
												</div>
												<p class="help-block">Click on photo to change (max dimensions 256 x 256 pixel).</p>
											</div>
										</div>
									</form>
								</div>
								<!-- /.panel-body -->
								<div class="panel-footer">
									<div class="btn-toolbar text-right">
										<a class="btn btn-lg btn-primary col-lg-5 pull-right" onclick="getMeet4EatUI().onBtnUserEditApply()">Apply</a>
										<a class="btn btn-lg btn-primary col-lg-3 pull-right" onclick="getMeet4EatUI().onBtnUserEditCancel()">Cancel</a>
									</div>
								</div>
								<!-- /.panel-footer -->
							</div>
							<!-- /.panel -->
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<!-- /.row -->
				</div>
				<!-- page_users_edit -->

				<div id="menu_events" class="hide">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">Events <a id="page_events_new" class="btn btn-sm btn-primary pull-right" onclick="getMeet4EatUI().onBtnEventNew()">New Event</a></h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="panel panel-default">
								<div class="panel-heading">
									<strong>List of all events</strong>
								</div>
								<!-- /.panel-heading -->
								<div class="panel-body">
									<table id="table_events" width="100%" class="table table-striped table-bordered table-hover">
										<thead>
											<tr>
												<th>Name</th>
												<th>Description</th>
												<th>Event Start</th>
												<th>Event Repeat</th>
												<th>Public</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
								<!-- /.panel-body -->
							</div>
							<!-- /.panel -->
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<!-- /.row -->
				</div>
				<!-- menu_events -->

				<!-- menu_events_edit -->
				<div id="page_events_edit" class="hide">
					<div class="row">
						<div class="col-sm-12">
							<h1 class="page-header text-center">Edit Event</h1>
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<div class="row">
						<div class="col-lg-8 col-lg-offset-2 col-sm-12">
							<div class="panel panel-default">
								<div class="panel-heading">
									<strong><span id="page_events_edit_title"></span></strong>
								</div>
								<!-- /.panel-heading -->
								<div class="panel-body">
									<!-- nav tabs -->
									<ul id="page_nav_events_edit" class="nav nav-tabs hide" style="margin-bottom: 30px;">
										<li class="active"><a href="#page_events_edit_pane_event" data-toggle="tab">Event</a>
										</li>
										<li><a href="#page_events_edit_pane_members" data-toggle="tab">Members</a>
										</li>
										<li><a href="#page_events_edit_pane_locations" data-toggle="tab">Locations</a>
										</li>
										<li><a href="#page_events_edit_pane_icon" data-toggle="tab">Icon</a>
										</li>
									</ul>
									<!-- Tab panes -->
									<div class="tab-content">
										<div id="page_events_edit_pane_event" class="tab-pane fade in active">
											<form role="form" id="page_events_edit_form">
												<input name="id" hidden>
												<div class="row form-group">
													<div class="col-sm-12">
														<label>Name</label>
														<input class="form-control" maxlength="64" name="name" placeholder="Enter text">
														<p class="help-block">Event name</p>
													</div>
												</div>
												<div class="row form-group">
													<div class="col-sm-12">
														<label>Description</label>
														<textarea class="form-control" maxlength="1000" rows="3" name="description" placeholder="Short description"></textarea>
														<p class="help-block">Event description (max 1000 characters).</p>
													</div>
												</div>
												<div class="row form-group">
													<div class="col-sm-12 checkbox">
														<label><input type="checkbox" name="public">Event is public</label>
														<p class="help-block">Is the event public? If not, only event members and owner have access.</p>
													</div>
												</div>
												<div class="row form-group">
													<div class="col-sm-12">
														<label>Event Start</label>
														<div id="page_events_edit_form_eventstart" class='input-group date'>
															<input type='text' class="form-control" />
															<span class="input-group-addon">
																<span class="glyphicon glyphicon-calendar"></span>
															</span>
														</div>
														<p class="help-block">Start of event</p>
													</div>
												</div>
												<div class="row form-group">
													<div class="col-sm-12">
														<div class="panel panel-default">
															<div class="panel-heading">
																<strong>Repeating Events</strong>
															</div>
															<div class="panel-body">

																<div class="col-sm-12">
																	<label>Week Days</label>
																	<div class="weekday">
																		<input type="checkbox" id="page_events_edit_form_weekday0"/>
																		<label for="page_events_edit_form_weekday0">Mon</label>
																		<input type="checkbox" id="page_events_edit_form_weekday1"/>
																		<label for="page_events_edit_form_weekday1">Tue</label>
																		<input type="checkbox" id="page_events_edit_form_weekday2"/>
																		<label for="page_events_edit_form_weekday2">Wed</label>
																		<input type="checkbox" id="page_events_edit_form_weekday3"/>
																		<label for="page_events_edit_form_weekday3">Thu</label>
																		<input type="checkbox" id="page_events_edit_form_weekday4"/>
																		<label for="page_events_edit_form_weekday4">Fri</label>
																		<input type="checkbox" id="page_events_edit_form_weekday5"/>
																		<label for="page_events_edit_form_weekday5">Sat</label>
																		<input type="checkbox" id="page_events_edit_form_weekday6"/>
																		<label for="page_events_edit_form_weekday6">Sun</label>
																	</div>
																	<p class="help-block">Define days of week for a repeating event.</p>
																</div>
																<div class="col-sm-12">
																	<label>Day Time</label>
																	<div id="page_events_edit_form_daytime" class='input-group date'>
																		<input type='text' class="form-control" />
																		<span class="input-group-addon">
																			<span class="glyphicon glyphicon-time"></span>
																		</span>
																	</div>
																	<p class="help-block">Define a day time for a repeating event.</p>
																</div>
															</div>
														</div>
													</div>
												</div>
											</form>
										</div>
										<div class="tab-pane fade" id="page_events_edit_pane_members">									
											<div class="row">
												<div class="form-group col-sm-12">
													<div class="form-group">
														<label>Event owner</label>
														<p id="page_events_edit_owner"></p>
													</div>
													<div class="form-group">
														<label>Members</label>
														<ul id="page_events_edit_members" class="panel list-group" style="min-height: 100px; max-height:300px; overflow-y:auto;">
														</ul>
													</div>
													<div class="form-group">
														<label>Add new member</label>
														<div class="input-group">
															<input id="page_events_edit_form_mem_search" type="text" class="form-control" placeholder="Search (at least 3 chars)" onkeydown="if (event.keyCode===13) {getMeet4EatUI().onBtnSearchMember();}">
															<span class="input-group-btn">
																<button class="btn btn-default" type="button" onclick="getMeet4EatUI().onBtnSearchMember();"><i class="fa fa-search"></i></button>
															</span>
														</div>
														<div class="input-group" style="margin-top: 10px;">
															<select id="page_events_edit_form_mem_search_hits" class="form-control"></select>
															<span class="input-group-btn">
																<button class="btn btn-default" type="button" onclick="getMeet4EatUI().onBtnEventMemberAdd();"><i class="fa fa-arrow-right"></i></button>
															</span>
														</div>
													</div>
												</div>
											</div>
										</div>
										<!-- pane members -->
										<div class="tab-pane fade" id="page_events_edit_pane_locations">
											<div class="row">
												<div class="form-group col-sm-12">
													<div class="form-group">
														<label>Locations</label>
														<ul id="page_events_edit_locations" class="panel list-group" style="min-height: 100px; max-height:300px; overflow-y:auto;">
														</ul>
													</div>
													<div class="form-group">
														<div class="panel panel-default">
															<div class="panel-heading">
																<strong>Add or update location</strong>
															</div>
															<div class="panel-body">
																<div class="input-group col-sm-12">
																	<form role="form" id="page_events_edit_location_form">
																		<input name="id" hidden>
																		<div class="form-group col-sm-6">
																			<div>
																				<label>Name</label>
																				<input class="form-control" maxlength="32" name="name" placeholder="Enter text">
																				<p class="help-block">Location name</p>
																			</div>
																			<div>
																				<label>Description</label>
																				<textarea class="form-control" maxlength="1000" rows="3" name="description" placeholder="Short description"></textarea>
																				<p class="help-block">Location description (max 1000 characters).</p>
																			</div>
																		</div>
																		<div class="col-sm-6 text-center">
																			<label>Icon</label>
																			<div>
																				<img id="page_events_edit_location_icon_img" style="max-width: 128px; cursor: pointer;" src="public/images/eventlocation-default.png" alt="User Photo" onclick="$('#page_events_edit_location_icon_img_input').trigger('click');">
																				<input id ="page_events_edit_location_icon_img_input" class="hide" type="file" onchange="getMeet4EatUI().onBtnEventLocationIcon(event);">
																			</div>
																			<p class="help-block">Click on photo to change (max dimensions 256 x 256 pixel).</p>
																		</div>
																	</form>
																</div>
															</div>
															<div class="panel-footer">
																<div class="btn-toolbar text-right">
																	<a class="btn btn-primary pull-right" onclick="getMeet4EatUI().onBtnEventLocationEditApply()">Apply Changes to Location</a>
																	<a class="btn btn-primary pull-right" onclick="getMeet4EatUI().onBtnEventLocationClearForm()">New Location</a>
																</div>
															</div>
														</div>
														<!-- location form -->
													</div>
												</div>
											</div>
										</div>
										<!-- pane location -->
										<div class="tab-pane fade" id="page_events_edit_pane_icon">
											<div class="row">
												<div class="form-group col-sm-8 col-sm-offset-2 text-center">
													<input hidden name="id">
													<div>
														<img id="page_events_edit_pane_icon_img" style="max-width: 256px; cursor: pointer;" src="public/images/event-default.png" alt="Event Icon" onclick="$('#page_events_edit_pane_icon_img_input').trigger('click');">
														<input id="page_events_edit_pane_icon_img_input" class="hide" type="file" onchange="getMeet4EatUI().onBtnEventIcon(event);">
													</div>
													<p class="help-block">Click on photo to change (max dimensions 256 x 256 pixel).</p>
												</div>
											</div>
										</div>
										<!-- pane icon -->
									</div>
								</div>
								<!-- /.panel-body -->
								<div class="panel-footer">
									<div class="btn-toolbar text-right">
										<a class="btn btn-lg btn-primary col-lg-5 pull-right" onclick="getMeet4EatUI().onBtnEventEditApply()">Apply</a>
										<a class="btn btn-lg btn-primary col-lg-3 pull-right" onclick="getMeet4EatUI().onBtnEventEditCancel()">Cancel</a>
									</div>
								</div>
								<!-- /.panel-footer -->
							</div>
							<!-- /.panel -->
						</div>
						<!-- /.col-lg-12 -->
					</div>
					<!-- /.row -->
				</div>
				<!-- page_users_edit -->

				<div id="menu_system" class="hide">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">System Information</h1>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-6">
							<table class="table table-striped table-bordered table-hover">
								<tr>
									<td>Web service version</td>
									<td><span id="sys_serverversion"></span></td>
								</tr>
								<tr>
									<td>Last maintenance</td>
									<td><span id="sys_lastmaintenance"></span></td>
								</tr>
								<tr>
									<td>Last update</td>
									<td><span id="sys_lastupdate"></span></td>
								</tr>
								<tr>
									<td>Count users to purge</td>
									<td><span id="sys_countuserspurge"></span></td>
								</tr>
								<tr>
									<td>Count events to purge</td>
									<td><span id="sys_counteventspurge"></span></td>
								</tr>
								<tr>
									<td>Count event locations to purge</td>
									<td><span id="sys_counteventlocationspurge"></span></td>
								</tr>
								<tr>
									<td>Count pending account registrations</td>
									<td><span id="sys_countpendingaccounts"></span></td>
								</tr>
								<tr>
									<td>Count pending password resets</td>
									<td><span id="sys_countpendingpasswords"></span></td>
								</tr>
							</table>
						</div>
					</div>
					<!-- /.row -->
					<div class="row">
						<div class="col-sm-12">
							<h2 class="page-header">Maintenance</h2>
							<div class="">
								<button class="btn btn-default btn-primary" onclick="getMeet4EatUI().onBtnMaintenancePurge()">Purge Resources</button>
								<p class="help-block">Perform system purge. All unnecessary resources are removed.</p>
							</div>
						</div>
					</div>
					<!-- /.row -->
					<div class="row">
						<div class="col-sm-12">
							<h2 class="page-header">Client Updates <a id="page_update_entry_new" class="btn btn-sm btn-primary pull-right" onclick="getMeet4EatUI().onBtnUpdateEntryNew()">New Update Entry</a></h2>
							<div class="panel panel-default">
								<div class="panel-heading">
									<strong>Update Entries</strong>
									<div class="small"><strong>NOTE: All entries must consist of a unique tuple of "Name, OS, Flavor".</strong></div>
								</div>
								<div class="panel-body">
									<table id="table_updates" width="100%" class="table table-striped table-bordered table-hover">
										<thead>
											<tr>
												<th>Name</th>
												<th>OS</th>
												<th>Flavor</th>
												<th>Version</th>
												<th>Release Date</th>
												<th>URL</th>
												<th>Active</th>
												<th></th>
											</tr>
										</thead>
										<tbody>
										</tbody>
									</table>
								</div>
								<div class="panel-footer">
									<h3 class="">Update Check Request</h3>
									<div class="small"><strong>NOTE: Use this tool to simulate a client and validate your update check entries.</strong></div>
									<br>
									<div class="btn-toolbar">
										<form id="page_update_check_form" role="form">
											<div class="form-group col-sm-3">
												<label>Name</label>
												<input class="form-control" maxlength="255" name="name" placeholder="Client name">
											</div>
											<div class="form-group col-sm-3">
												<label>OS</label>
												<input class="form-control" maxlength="255" name="os" placeholder="MSWin, MacOS, Linux,...">
											</div>
											<div class="form-group col-sm-2">
												<label>Flavor</label>
												<input class="form-control" maxlength="255" name="flavor" placeholder="Client flavor, e.g. Release">
											</div>
											<div class="form-group col-sm-2">
												<label>Version</label>
												<input class="form-control" maxlength="128" name="clientVersion" placeholder="Latest version">
											</div>
											<div class="form-group col-sm-2">
												<label>&nbsp;</label>
												<a class="form-control btn btn-sm btn-primary" onclick="getMeet4EatUI().onBtnUpdateEntryCheck()">Check</a>
											</div>
										</form>
										<h3>Check Results</h3>
										<table id="update_check_results" width="100%" class="table table-striped table-bordered table-hover">
											<thead>
												<tr>
													<th>Version</th>
													<th>URL</th>
													<th>Release Date</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td id="update_check_results_version"></td>
													<td id="update_check_results_url"></td>
													<td id="update_check_results_releasedate"></td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- menu_system -->

				<div id="menu_about" class="hide">
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header">About</h1>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-6 col-sm-offset-3">
							<div class="panel panel-default info-box">					
								<h1>Meet4Eat</h1>
								<p>Copyright 2017</p>
								<p>Web site <a href='http://m4e.org'>http://m4e.org</a></p>
								<br>
								<p>Admin panel version <span id="info_viewversion"></span></p>							
								<p>Web service version <span id="info_serverversion"></span></p>
								<p>Web interface version <span id="info_clientversion"></span></p>
							</div>
						</div>
					</div>
					<!-- /.row -->
				</div>
				<!-- menu_about -->
			</div>
			<!-- page-wrapper -->
		</div>
		<!-- main_content -->

		<!-- Modal used for message dialog -->
		<div class="modal fade" id="msg_box" tabindex="-1" role="dialog" aria-labelledby="msg_box_title" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="msg_box_title">title</h4>
					</div>
					<div id="msg_box_text" class="modal-body">
					</div>
					<div class="modal-footer btn-toolbar">
						<button id="msg_box_btn2" type="button" class="btn btn-primary col-sm-3 pull-right" data-dismiss="modal">Btn2</button>
						<button id="msg_box_btn1" type="button" class="btn btn-primary col-sm-3 pull-right" data-dismiss="modal">Btn1</button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<!-- /.modal -->

		<!-- Modal used for update check entry dialog -->
		<div class="modal fade" id="dialog_updates_edit" tabindex="-1" role="dialog" aria-labelledby="dialog_updates_title" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="dialog_updates_title">Update Check Entry</h4>
					</div>
					<div class="modal-body">
						<form role="form" id="page_update_edit_form">
							<input name="id" hidden>
							<div class="form-group">
								<label>Name</label>
								<input class="form-control" maxlength="255" name="name" placeholder="Client name">
								<p class="help-block">This is the client name.</p>
							</div>
							<div class="form-group">
								<label>Operation System</label>
								<input class="form-control" maxlength="255" name="os" placeholder="MSWin, MacOS, Linux,...">
								<p class="help-block">Name of the operation system</p>
							</div>
							<div class="form-group">
								<label>Flavor</label>
								<input class="form-control" maxlength="255" name="flavor" placeholder="Client flavor, e.g. Beta-Test">
								<p class="help-block">Client flavor, let empty for regular releases</p>
							</div>
							<div class="form-group">
								<label>Version</label>
								<input class="form-control" maxlength="128" name="version" placeholder="Latest version">
								<p class="help-block">The latest client version</p>
							</div>
							<div class="form-group">
								<label>URL</label>
								<input class="form-control" maxlength="128" name="url" placeholder="The download URL">
								<p class="help-block">URL for downloading the installation package</p>
							</div>
							<div class="form-group">
								<input type="checkbox" name="active"> 
								<label>Active</label> 
								<p class="help-block">Only active update entries are considered for checks.</p>
							</div>
						</form>
					</div>
					<div class="modal-footer btn-toolbar">
						<button type="button" class="btn btn-primary col-sm-3 pull-right" data-dismiss="modal" onclick="getMeet4EatUI().onBtnUpdateEntryEditApply()">Apply</button>
						<button type="button" class="btn btn-primary col-sm-3 pull-right" data-dismiss="modal" onclick="getMeet4EatUI().onBtnUpdateEntryEditCancel()">Cancel</button>
					</div>
				</div>
				<!-- /.modal-content -->
			</div>
			<!-- /.modal-dialog -->
		</div>
		<!-- /.modal -->
	
		<div id="display_error"></div>
		<script>
			var m4eUI   = null;
			var timeout = 30*60;

			/**
			 * Get the UI controller.
			 * @returns {Meet4EatUI}  UI controller
			 */
			function getMeet4EatUI() {
				return m4eUI;
			}

			/**
			 * Update the timeout display and handle the timeout.
			 */
			function updateTimeout() {
				setTimeout(function() {
					var timeleft = timeout - m4eUI.getPastAccessTime();
					if (timeleft < 0) {
						m4eUI.onBtnLogout();
						return;
					}
					var min = Math.floor(timeleft / 60);
					$('#timeout_info').text("(Timeout in " + min + " min" +")");
					updateTimeout();
				}, 1000);				
			}

			/* initialize UI */
			$(function() {
				m4eUI = new Meet4EatUI();
				m4eUI.initialize();
				updateTimeout();
			});
		</script>
	</body>
</html>
