<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Meat4Eat - WS Connection Test</title>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="public/libs/js/jquery.js"></script>
		<script src="public/libs/js/bootstrap.js"></script>
		<script src="public/libs/js/Meet4Eat-REST.js"></script>
		<link rel="stylesheet" href="public/libs/css/bootstrap.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/font-awesome.css" type="text/css">
		<link rel="stylesheet" href="public/libs/css/Meet4Eat-UI.css" type="text/css">
	</head>
	<body>
		<div class="container">
			<h1 class="text-center">Meet4Eat - WS Connection Test</h1>
			<div class="row">
				<div class="col-sm-8 col-sm-offset-2">
					<div class="panel panel-default">
						<div class="panel-heading">
							<strong>Communication log</strong>
						</div>
						<!-- /.panel-heading -->
						<div class="panel-body">
							<div id="output"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>

			function outputText(text) {
				var txt = $('#output').html();
				$('#output').html(txt + "<br>" + text);
			}

			function testWS() {

				outputText('Trying to connect the server...');
				var connection = new WebSocket('ws://localhost:8080/m4e-webapp/ws');//, ['soap', 'xmpp']);

				connection.onopen = function() {
					outputText('Connection was established');
					connection.send('Hello Server');
				};

				// Log errors
				connection.onerror = function(error) {
					outputText('WebSocket Error: ' + error);
				};

				// Log messages from the server
				connection.onmessage = function(e) {
					outputText('Message arrived: ' + e.data);
				};

				connection.onclose = function(response) {
					outputText('Connection was closed, code ' + response.code + ", reason: " + response.reason);
				};
			}

			/* initialize UI */
			$(function() {
				testWS();
			});
		</script>
	</body>
</html>
